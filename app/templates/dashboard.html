{% extends "base.html" %}

{% block title %}Dashboard - BBA Services{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
    <h1>ğŸ‘‹ Welcome, {{ current_user.email }}!</h1>
    <a href="{{ url_for('auth.logout') }}" class="logout-link">Logout</a>
</div>

<div class="info-box">
    <p style="margin-bottom: 10px;"><strong>Account Status:</strong> 
        <span style="color: #28a745;">âœ… Email Verified</span>
        {% if current_user.mfa_enabled %}
        | <span style="color: #28a745;">ğŸ”’ SMS MFA Enabled</span>
        {% else %}
        | <span style="color: #ffc107;">âš ï¸ SMS MFA Disabled</span>
        {% endif %}
    </p>
    <p style="margin: 0; color: #666;">Member since: {{ current_user.created_at.strftime('%B %d, %Y') }}</p>
</div>

{% if not current_user.mfa_enabled %}
<div style="background: #fff3cd; border: 1px solid #ffc107; color: #856404; padding: 20px; border-radius: 8px; margin: 30px 0;">
    <h3 style="margin: 0 0 10px 0;">ğŸ“± Secure Your Account</h3>
    <p style="margin-bottom: 15px;">Enable SMS-based two-factor authentication for extra security.</p>
    <a href="{{ url_for('main.enable_mfa') }}" style="background: #ffc107; color: #856404; padding: 10px 20px; text-decoration: none; border-radius: 4px; font-weight: bold;">Enable SMS MFA</a>
</div>
{% else %}
<div style="background: #e8f5e8; border: 1px solid #28a745; color: #155724; padding: 20px; border-radius: 8px; margin: 30px 0;">
    <h3 style="margin: 0 0 10px 0;">ğŸ›¡ï¸ Account Secured</h3>
    <p style="margin-bottom: 15px;">SMS MFA is enabled for phone ending in {{ current_user.phone[-4:] if current_user.phone else 'N/A' }}.</p>
    <form method="POST" action="{{ url_for('main.disable_mfa') }}" style="display: inline;">
        <button type="submit" style="background: #dc3545; color: white; border: none; padding: 8px 16px; border-radius: 4px; font-size: 14px;">Disable MFA</button>
    </form>
</div>
{% endif %}

<div style="margin-top: 40px;">
    <h2 style="color: #333; margin-bottom: 20px;">Financial Health Tools</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid #667eea;">
            <h3 style="color: #333; margin-bottom: 10px;">ğŸ“Š Assessment</h3>
            <p style="color: #666; margin-bottom: 15px;">Take our financial health questionnaire.</p>
            <button onclick="alert('Coming soon!')" style="background: #667eea; color: white; border: none; padding: 8px 16px; border-radius: 4px;">Start Assessment</button>
        </div>
        
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid #28a745;">
            <h3 style="color: #333; margin-bottom: 10px;">ğŸ“ˆ Analytics</h3>
            <p style="color: #666; margin-bottom: 15px;">View your financial metrics and trends.</p>
            <button onclick="alert('Coming soon!')" style="background: #28a745; color: white; border: none; padding: 8px 16px; border-radius: 4px;">View Analytics</button>
        </div>
    </div>
</div>
{% endblock %}